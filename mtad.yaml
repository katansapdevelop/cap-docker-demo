ID: logicalstar.docker.demo.app
_schema-version: 3.3.0
version: 0.0.0

modules:
  # A cf app consuming the configuration
  - name: cap-docker-demo-app
    type: application # value custom would do just as well
    parameters: # All parameters are optional and can be deleted - defaults will be taken/detected if non specified.
      docker:   # Schedule a docker image found in that repository instead of staging bits
        image: katan/cap-docker-demo # repo/image:tag
        # username: <optional username> # credentials to access docker repo
        # password: <optional password>
      instances: 1  #optional
      disk-quota: 2GB 
      routes: # Optional, otherwise one generated by template is assigned
      - route: ${app-name}.${domain}
    properties:  # How environment variables are defined
      MY_ENV_VAR: "value-of-my-env-var"
    requires:
    - name: cap-docker-demo-destinations
    - name: cap-docker-demo-auth

resources:
- name: cap-docker-demo-destinations
  type: org.cloudfoundry.managed-service
  parameters:
    service: destination
    service-plan: lite
    config:
      init_data:
        instance:
          destinations:
          - Authentication: OAuth2ClientCredentials
            Name: IS_APIS
            ProxyType: Internet
            Description: Destination to access IS APIs
            Type: HTTP
            URL: https://5ebed044trial.it-cpitrial06.cfapps.us10-001.hana.ondemand.com/api/v1

- name: cap-docker-demo-auth
  type: org.cloudfoundry.managed-service
  parameters:
    config:
      tenant-mode: dedicated
      xsappname: cap-docker-demo-auth
    path: ./xs-security.json
    service: xsuaa
    service-plan: application
